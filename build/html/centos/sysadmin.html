

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' maxcdn.bootstrapcdn.com; style-src 'self' 'unsafe-inline' maxcdn.bootstrapcdn.com fonts.googleapis.com; img-src 'self' data:; media-src 'self'; font-src 'self' fonts.googleapis.com;">
  
	<title>The System Administrator Experience &mdash; Linux Guide and Hints </title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/prism.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Linux Guide and Hints master documentation" href="../index.html"/>
        <link rel="next" title="FreeIPA" href="freeipa.html"/>
        <link rel="prev" title="OpenLDAP" href="openldap.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

	<nav class='navbar navbar-inverse'>
		<div class='container'>
			<div class='navbar-header'>
				<button type='button' class='navbar-toggle collapsed'
					data-toggle='collapse' data-target='#collapse'>
					<i class='fa fa-lg fa-bars'></i>					
				</button>
				<a class='navbar-brand' href='/angels-of-clockwork/'>EPK</a>
			</div>

			<div class='collapse navbar-collapse' id='collapse'>
				<ul class='nav navbar-nav'>
					<li><a href='/angels-of-clockwork/'>Home</a></li>
                    <li><a href='/angels-of-clockwork/audio.html'>Music</a></li>
					<li class='active'><a href='/angels-of-clockwork/linux-guide-and-hints/build/html/'>Wiki</a></li>
				</ul>
			</div>
		</div>
	</nav>
 

<main id='main'>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Linux Guide and Hints
        

        
        </a>

        
          
          
            
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Fedora</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../fedora/allinonescript.html">All-in-One Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/blockify.html">Blockify</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/cipc.html">Cisco IP Communicator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/cipc.html#installing-via-playonlinux">Installing via PlayOnLinux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/cipc.html#installing-via-regular-wine">Installing via Regular Wine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/cipc.html#pulse-audio">Pulse Audio</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/clangformat.html">Clang Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/emulators.html">Emulators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#mupen64plus-unofficial-faq">Mupen64Plus unofficial FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#where-does-mupen64plus-like-to-put-files">Where does Mupen64Plus like to put files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#i-m-getting-a-dlopen-error">I’m getting a <code>dlopen</code> error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#i-changed-one-of-the-hi-res-textures-and-no-change-is-visible">I changed one of the hi-res textures and no change is visible</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#recommended-plugins">Recommended plugins?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#how-do-i-compile-it">How do I compile it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#gba">GBA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#mame-configuration">MAME configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#inconsistency">Inconsistency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#example-mame-ini">Example <code>mame.ini</code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#example-command-line-options">Example command line options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#speed">Speed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#ui-script">UI script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#mgba-controller-joystick-issue">mGBA controller/joystick issue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#compiling-mgba">Compiling mGBA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#cmake-variables">CMake variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/emulators.html#link-cable-support">Link cable support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#id1">BGB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/emulators.html#id2">mGBA</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/gcc.html">GCC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/gcc.html#installing-prerequisites-gmp-mpfr-mpc">Installing prerequisites: GMP, MPFR, MPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/gcc.html#building">Building</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/git.html">Git</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/git.html#workflow">Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/git.html#git-commit-am-didnt-add-my-latest-files"><code>git commit -am</code> didn’t add my latest files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/git.html#what-creates-duplicate-commits-different-shas">What creates duplicate commits (different SHA’s)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/git.html#merge">Merge</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../fedora/git.html#temporary-hotfix-branch">Temporary (hotfix) branch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fedora/git.html#feature-long-lived-branch">Feature (long-lived) branch</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/git.html#rebase">Rebase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../fedora/git.html#local-branch-diverges-from-origin-remote">Local branch diverges from origin (remote)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fedora/git.html#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fedora/git.html#clean-up-your-work">Clean up your work</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/iphone.html">iPhone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/misc.html">Misc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/misc.html#using-ld-library-path-in-fish">Using <code>LD_LIBRARY_PATH</code> in Fish</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/misc.html#failed-to-start-load-kernel-modules">Failed to start Load Kernel Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/misc.html#error-still-persists-after-uninstalling-virtualbox">Error still persists after uninstalling VirtualBox</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/nvidiadrivers.html">Nvidia drivers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/nvidiadrivers.html#negativo">Negativo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/nvidiadrivers.html#rpm-fusion">RPM Fusion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/nvidiadrivers.html#kmod">kmod</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/nvidiadrivers.html#akmod">akmod</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/nvidiadrivers.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/pip.html">pip</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/postgres.html">Installing PostgreSQL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/postgres.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/postgres.html#foreword">Foreword</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/postgres.html#simplest-method">Simplest method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/postgres.html#installing-from-postgresql-s-repository">Installing from PostgreSQL’s repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/postgres.html#disabling-postgresql-s-repo">Disabling PostgreSQL’s repo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/postgres.html#initialize-the-service">Initialize the service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/postgres.html#running-the-server">Running the server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/postgres.html#the-postgresql-user-account">The PostgreSQL User Account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/postgres.html#managing-the-server">Managing the server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/postgres.html#importing-some-data">Importing some data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/powerline.html">Powerline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/powerline.html#installing-via-dnf">Installing via <code>dnf</code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/powerline.html#enabling-powerline-installed-via-dnf">Enabling powerline (installed via <code>dnf</code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/powerline.html#fish">Fish</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/powerline.html#vim">vim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/powerline.html#tmux">tmux</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/pulseaudio.html">Pulseaudio</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/pulseaudio.html#flat-volume">Flat Volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/pulseaudio.html#sound-crackling">Sound Crackling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/tmux.html">tmux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/vim.html">vim</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/vim.html#plugins">Plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/vlc.html">VLC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/vlc.html#qt-5-6-interface-dpi">QT 5.6 Interface DPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/vlc.html#vdpau-decoding-hardware-acceleration">VDPAU decoding (hardware acceleration)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/vmware.html">VMware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/winetips.html">Wine Tips</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/winetips.html#new-vegas">New Vegas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fedora/winetips.html#modding">Modding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/winetips.html#id1">Mod Organizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/winetips.html#lutana-nvse">Lutana NVSE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fedora/xscreensaver.html">XScreenSaver</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fedora/xscreensaver.html#gamma-or-brightness-is-too-high-when-unlocking">Gamma or brightness is too high when unlocking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora/xscreensaver.html#disable-fade-to-black-effect">Disable fade to black effect</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">CentOS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="openldap.html">OpenLDAP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="openldap.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="openldap.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="openldap.html#tutorial-preface-notes-and-recommendations">Tutorial Preface, Notes, and Recommendations</a></li>
<li class="toctree-l2"><a class="reference internal" href="openldap.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#packages">Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#certificates">Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#ldap-server-configuration">LDAP Server Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#ldap-structure">LDAP Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#add-users-via-migration">Add Users via Migration</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#add-users-via-ldif">Add Users via LDIF</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#nfs-export-home-directories">NFS Export Home Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#firewall">Firewall</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="openldap.html#client">Client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#rhel-6-rhel-7-fedora-20">RHEL 6/RHEL 7/Fedora 20+</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#automounting-home-directories">Automounting Home Directories</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="openldap.html#ldap-structure-add-ons">LDAP Structure Add-ons</a><ul>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#sudo">SUDO</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#member-groups">Member Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#referential-integrity">Referential Integrity</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#acl">ACL</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#disable-anonymous-binding">Disable Anonymous Binding</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#ldap-logging">LDAP Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="openldap.html#password-policy">Password Policy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The System Administrator Experience</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#recommendations">Recommendations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#certification-completions">Certification Completions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes-and-changelog">Notes and Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="#begin">Begin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup-a-kvm-hypervisor">Setup a KVM Hypervisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dhcp-and-dns">DHCP and DNS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#server-and-content-management">Server and Content Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connect-content-management-to-hypervisor">Connect Content Management to Hypervisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spin-up-vm-s-using-katello-spacewalk">Spin Up VM’s Using Katello/Spacewalk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-openldap">Setup OpenLDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spin-up-two-vm-s-for-databases">Spin Up Two VM’s for Databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spin-up-configuration-management">Spin Up Configuration Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spin-up-vm-for-nfs-iscsi">Spin Up VM for NFS/iSCSI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-bacula-server">Deploy Bacula Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-four-vm-s">Deploy Four VM’s</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-load-balancer-vm">Deploy Load Balancer VM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-postfix-vm">Deploy Postfix VM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-nagios-vm">Setup Nagios VM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-syslog-vm">Setup Syslog VM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#document-your-work">Document Your Work</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rpm-build-server">RPM Build Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-server">Git Server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="freeipa.html">FreeIPA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#tutorial-preface-notes-and-recommendations">Tutorial Preface, Notes, and Recommendations</a></li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#dns">DNS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#freeipa-has-full-control">FreeIPA has full control</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#delegation">Delegation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#server-setup">Server Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#required-packages">Required Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#replica">Replica</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#replica-automation">Replica Automation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#active-directory-trust">Active Directory Trust</a></li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#client-setup">Client Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#rhel-7">RHEL 7</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#rhel-6">RHEL 6</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#mac-clients">Mac Clients</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#hbac">HBAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#sudo">SUDO</a></li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#legacy-client-setup">Legacy Client Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#solaris-10">Solaris 10</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#solaris-11">Solaris 11</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#legacy-hbac">Legacy HBAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#legacy-active-directory-trust">Legacy Active Directory Trust</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="freeipa.html#situational-options">Situational Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#remove-realm-for-ad-users">Remove &#64;realm for AD users</a></li>
<li class="toctree-l3"><a class="reference internal" href="freeipa.html#rhel-6-sudo-and-default-domain-suffix">RHEL 6 SUDO and Default Domain Suffix</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
				<i data-toggle="wy-nav-top" class='fa fa-lg fa-bars'></i>					

        <a href="../index.html">Linux Guide and Hints</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ol class="breadcrumb wy-breadcrumbs">
    <li><a href="../index.html">Docs</a></li>
      
    <li class="active">The System Administrator Experience</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/centos/sysadmin.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ol>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

						 
						 <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
							 
							 <a href="freeipa.html" class="btn btn-default pull-right" accesskey="n">
								 FreeIPA <span class="fa fa-arrow-circle-right"></span>
							 </a>
							 
							 
							 <a href="openldap.html" class="btn btn-default" accesskey="p">
								 <span class="fa fa-arrow-circle-left"></span> OpenLDAP
							 </a>
							 
						 </div>
						 

            
  <div class="section" id="the-system-administrator-experience">
<h1>The System Administrator Experience<a class="headerlink" href="#the-system-administrator-experience" title="Permalink to this headline">¶</a></h1>
<p>This write up provides steps on the System Administrator experience. This is not an end-all, be-all, and has many variables to keep in mind.</p>
<p>Please keep in mind, this is for Red Hat based distributions, mainly CentOS 6 and 7. You may attempt to use Scientific Linux, but just know that they modify the base repositories and make other changes that go outside of what is shipped by Red Hat, and therefore CentOS.</p>
<div class="section" id="recommendations">
<h2>Recommendations<a class="headerlink" href="#recommendations" title="Permalink to this headline">¶</a></h2>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Software Replacements</p>
<ul class="simple">
<li>Postgresql can be replaced with MySQL/MariaDB<ul>
<li>Note: Doing this will mean you will need another way to “cluster” them. EL Distributions do not have a built-in way to do this.</li>
</ul>
</li>
<li>Spacewalk can be replaced with Katello (<strong>recommended to use Katello</strong>, but you can try both)</li>
<li>You can replace KVM with ESXi if you wish, with specific caveats listed in the steps.</li>
<li>nagios can be replaced with icinga</li>
<li>On EL7, you can replace firewalld with the regular iptables service - This may be required for your virtual host</li>
</ul>
</div></div>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>General Notes</p>
<ul class="simple">
<li>It’s recommended to use colored vim syntax. Root doesn’t use vim when vim-enhanced is installed. You can make an alias for vi to run vim (not recommended).</li>
<li>Turn on syntaxing in ~/.vimrc – syntax on</li>
<li>Make the vim colors brighter in ~/.vimrc – set background=dark</li>
<li>Export your EDITOR variable in ~/.bash_profile – export EDITOR=vim</li>
<li>Keep selinux set to <strong>enforcing</strong></li>
<li>It is recommended to <a class="reference external" href="http://www.bromosapien.net/media/index.php/Linux_Disable_FirewallD">disable firewalld</a> for your lab machine. Everything else can stay.</li>
</ul>
</div></div>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Hardware Requirements</p>
<ul class="simple">
<li>RAM - Minimum: 8GB, Recommended: 32GB</li>
<li>CPU - Minimum: Quad Core i5, Recommended: Quad Core with HT i7 or Xeon</li>
<li>Storage - Minimum: 1TB, Recommended: 4TB<ul>
<li>This should be spread out with multiple disks. Don’t use one 4TB, for example. Use 2x2TB or 4x1TB.</li>
</ul>
</li>
<li>Network - 1gb link recommended</li>
</ul>
<p>Please consider on building an actual lab machine that you can do this on.</p>
</div></div>
</div>
<div class="section" id="certification-completions">
<h2>Certification Completions<a class="headerlink" href="#certification-completions" title="Permalink to this headline">¶</a></h2>
<p>Going through this guide fulfills the following certification objectives for the RHCSA.</p>
<blockquote>
<div><ul class="simple">
<li>Operate running systems<ul>
<li>Boot, reboot, and shut down a system normally</li>
<li>Locate and interpret system log files and journals</li>
<li>Access a virtual machine’s console</li>
<li>Start and stop virtual machines</li>
<li>Start, stop, and check the status of network services</li>
<li>Securely transfer files between systems</li>
</ul>
</li>
<li>Configure local storage<ul>
<li>List, create, delete partitions on MBR and GPT disks</li>
<li>Create and remove physical volumes, assign physical volumes to volume groups, and create and delete logical volumes</li>
<li>Configure systems to mount file systems at boot by Universally Unique ID (UUID) or label</li>
<li>Add new partitions and logical volumes, and swap to a system non-destructively</li>
</ul>
</li>
<li>Create and configure file systems<ul>
<li>Mount and unmount CIFS and NFS network file systems</li>
<li>Extend existing logical volumes</li>
<li>Diagnose and correct file permission problems</li>
</ul>
</li>
<li>Deploy, configure, and maintain systems<ul>
<li>Configure networking and hostname resolution statically or dynamically</li>
<li>Schedule tasks using at and cron</li>
<li>Start and stop services and configure services to start automatically at boot</li>
<li>Configure systems to boot into a specific target automatically</li>
<li>Install Red Hat Enterprise Linux automatically using Kickstart</li>
<li>Configure a physical machine to host virtual guests</li>
<li>Install Red Hat Enterprise Linux systems as virtual guests</li>
<li>Configure systems to launch virtual machines at boot</li>
<li>Configure network services to start automatically at boot</li>
<li>Configure a system to use time services</li>
<li>Install and update software packages from Red Hat Network, a remote repository, or from the local file system (in this case, CentOS repos)</li>
<li>Update the kernel package appropriately to ensure a bootable system</li>
</ul>
</li>
<li>Manage security<ul>
<li>Configure firewall settings using firewall-config, firewall-cmd, or iptables</li>
<li>Set enforcing and permissive modes for SELinux</li>
<li>List and identify SELinux file and process context</li>
<li>Restore default file contexts</li>
<li>Use boolean settings to modify system SELinux settings</li>
<li>Diagnose and address routine SELinux policy violations</li>
</ul>
</li>
</ul>
</div></blockquote>
<p>Going through this guide fulfills the following certification objectives for the RHCE.</p>
<blockquote>
<div><ul class="simple">
<li>System configuration and management<ul>
<li>Use firewalld and associated mechanisms such as rich rules, zones and custom rules, to implement packet filtering and configure network address translation (NAT)</li>
<li>Use /proc/sys and sysctl to modify and set kernel runtime parameters</li>
<li>Configure a system as either an iSCSI target or initiator that persistently mounts an iSCSI target</li>
</ul>
</li>
<li>Network services<ul>
<li>Install the packages needed to provide the service</li>
<li>Configure SELinux to support the service</li>
<li>Use SELinux port labeling to allow services to use non-standard ports</li>
<li>Configure the service to start when the system is booted</li>
<li>Configure the service for basic operation</li>
</ul>
</li>
<li>HTTP/HTTPS<ul>
<li>Configure a virtual host</li>
</ul>
</li>
<li>DNS<ul>
<li>Troubleshoot DNS client issues (you will also be troubleshooting server issues too)</li>
</ul>
</li>
<li>NFS<ul>
<li>Provide network shares to specific clients</li>
</ul>
</li>
<li>Database Services<ul>
<li>Install and configure MariaDB (though you may be using postgresql, consider doing a separate mariadb instance)</li>
<li>Backup and restore a database</li>
<li>Create a simple database schema</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="notes-and-changelog">
<h2>Notes and Changelog<a class="headerlink" href="#notes-and-changelog" title="Permalink to this headline">¶</a></h2>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Post Experience Notes</p>
<p>While this write up uses KVM exclusively, you may want to enhance your learning after the fact by setting up oVirt on your virtual host and also setting up manageiq. It may require you to redesign everything or even start over, but it is something you can do to say “Yes, I’ve used that product”.</p>
</div></div>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Date</th>
<th class="head">Changes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>May 10, 2016</td>
<td><ul class="first last simple">
<li>Added information about oVirt</li>
<li>Added information about cobbler</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="begin">
<h2>Begin<a class="headerlink" href="#begin" title="Permalink to this headline">¶</a></h2>
<p>We’ll now begin the system administrator experience. We will provide from beginning to end, what to do, without giving away what has to be done or has to be configured. This is on you to perform. At the end, there is a “wiki” that you create where you will have a chance to document everything you did. I recommend writing down or putting in a word document what you are doing or have done throughout so it’ll make your wiki documentation much, much better.</p>
<div class="section" id="setup-a-kvm-hypervisor">
<h3>Setup a KVM Hypervisor<a class="headerlink" href="#setup-a-kvm-hypervisor" title="Permalink to this headline">¶</a></h3>
<p>Now you’ll need to setup a KVM Hypervisor. You can do this on Fedora 23+ or CentOS 7. Because CentOS 7 is a stable platform for libvirt, I recommend using going that route. If you want the latest features for the cost of some stability, Fedora will work for you.</p>
<p>You may want to make sure your hardware supports virtualization.</p>
<pre><code class="language-none">egrep --color 'vmx|svm' /proc/cpuinfo</code></pre><div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Recommendations and Options</p>
<ul class="simple">
<li>Create multiple datastores (storage pools where the VM images will sit)<ul>
<li>Example, 2x2TB means you can make two datastores, 4x1TB means you can make four.</li>
</ul>
</li>
<li>Attempt to use LVM as the backing for the store.<ul>
<li>You can create a Volume Group and have the VM’s live as Logical Volumes.</li>
<li>You can create a Volume Group and have one or more partitions to make “more” datastores</li>
</ul>
</li>
<li>Destroy the “built in” network that libvirt already provides and make your own<ul>
<li>It already makes virbr0. Make your own OR modify it to not support DHCP/DNS (eg, static only)</li>
</ul>
</li>
</ul>
</div></div>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Hints</p>
<ul class="simple">
<li>Most of your commands will be from the following:<ul>
<li>virsh</li>
<li>fdisk/parted</li>
<li>pvcreate &amp; vgcreate</li>
<li>mkfs</li>
</ul>
</li>
<li>To get the most performance out of your VM’s disk wise, consider these options:<ul>
<li>Avoid QCOW2</li>
<li>Use virtio for the hardware whenever possible</li>
<li>Set caching to “none” for hard disks on VM’s when using raw volumes or partitions</li>
</ul>
</li>
</ul>
</div></div>
</div>
<div class="section" id="dhcp-and-dns">
<h3>DHCP and DNS<a class="headerlink" href="#dhcp-and-dns" title="Permalink to this headline">¶</a></h3>
<p>You’ll need to setup a DHCP/DNS server. You have two choices.</p>
<ol class="arabic simple">
<li>You can create a simple VM running CentOS 7</li>
<li>Use your hypervisor</li>
</ol>
<p>I personally have done both above with success. However, it was much more manageable to host DHCP and DNS from my hypervisor. Also, it is possible to allow cobbler handle DHCP and DNS, but this is outside the scope of this write up.</p>
<div class="panel panel-warning">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Warning</h3></div><div class="panel-body">
<p>If you plan on setting up a VM for DHCP and DNS, keep these in mind:</p>
<ul class="simple">
<li>The virtual interface for your hypervisor should be set to a gateway address, eg 10.200.0.1</li>
<li>The DHCP and DNS server should be set to something like 10.200.0.2 so you know the difference</li>
<li>The DHCP server needs to be configured to tell all the clients that the gateway is 10.200.0.1 but the name server is 10.200.0.2</li>
</ul>
</div></div>
<p>You will need to configure your hypervisor server to have:</p>
<ol class="arabic simple">
<li>IP forwarding enabled (/etc/sysctl.conf)</li>
<li>NAT enabled (firewalld can help you with this, check out the zones)</li>
<li>A virtual interface (you should have already configured this)</li>
</ol>
<p>When setting up DHCP and DNS:</p>
<ol class="arabic simple">
<li>Decide on a domain name. This can be a domain you own or one you make up internally. I personally used one of my four domains for this lab. RFC expects that internal networks have world routable domains. This is up to you. <strong>Do NOT use ‘.local’ domains</strong></li>
<li>Setup DNS forwarders to ensure your VM’s can get DNS requests from the internet. You create a forwarders { } block with each outside DNS IP listed. You can list as many as you want. <strong>Do NOT put these extra DNS servers in your dhcpd.conf configuration</strong></li>
<li>You need two zones. Forward Zone: This is for your domain, name to an IP. Reverse Zone: This is for reverse IP lookups, IP to a name.</li>
</ol>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Bonus Points</p>
<ul class="simple">
<li>Setup Dynamic DNS - This requires an almost specific configuration between dhcpd and named (bind).</li>
<li>Dynamic DNS needs to be aware of a domain name</li>
</ul>
</div></div>
<p>You can view <a class="reference external" href="https://www.bromosapien.net/media/index.php/Linux_Router_and_Firewall">this page</a> for some pointers if needed.</p>
<p><strong>From this point forward, you are to ensure each of your VM’s that you create have DNS entries. If you have Dynamic DNS running, you will NOT need to do any manual changes. You can use nsupdate to add additional entries as needed if you are implementing static A records or CNAME records.</strong></p>
</div>
<div class="section" id="server-and-content-management">
<h3>Server and Content Management<a class="headerlink" href="#server-and-content-management" title="Permalink to this headline">¶</a></h3>
<p>At this point, you’ll need to setup Spacewalk or Katello on a VM. I recommend using Katello as <strong>Satellite 6</strong> has its upstream from Katello. It is a combination of pulp, candlepin, foreman, and a form of puppet. This recommendation is primarily because Red Hat is phasing out <strong>Red Hat Network Classic</strong> and <strong>Satellite 5</strong>.</p>
<p>If you decide to use Spacewalk, go <a class="reference external" href="https://fedorahosted.org/spacewalk/wiki/HowToInstall">here</a>.</p>
<p>If you decide to use Katello, go <a class="reference external" href="http://www.katello.org/">here</a>.</p>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Heads up</p>
<ul class="simple">
<li>You’re going to be hosting repositories, I SERIOUSLY recommend creating a VM that has at least 250GB starting and going from there.</li>
<li>Previously, it was not possible to run Spacewalk on EL 7. It is now possible.</li>
<li>If you decide to use Spacewalk and you’re using ESXi, it will be a challenge to automate builds from the Spacewalk server.</li>
<li>Katello supports connecting directly to numerous hypervisors.</li>
<li>Spacewalk has an odd “dependency” on wanting DHCP/TFTP to exist on the server at the same time. There is no way around this. You do not have to use it unless you are using cobbler (which needs TFTP and a specific DHCP configuration).</li>
<li>Spacewalk is memory hungry. If you use it, you will need a hefty amount of RAM, unless you want spacewalk to fall flat on its face constantly</li>
</ul>
</div></div>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Bonus Points</p>
<ul class="simple">
<li>Setup errata importation for the CentOS Channels/Repositories to properly see Advisories and Information for package updates</li>
<li>Create custom kickstarts for your systems (this will help you out later)</li>
</ul>
</div></div>
<p>Kickstart examples can be found at my <a class="reference external" href="https://github.com/nazunalika/useful-scripts/tree/master/centos">github</a>.</p>
</div>
<div class="section" id="connect-content-management-to-hypervisor">
<h3>Connect Content Management to Hypervisor<a class="headerlink" href="#connect-content-management-to-hypervisor" title="Permalink to this headline">¶</a></h3>
<p>Next you will need to connect your Content Management to your hypervisor. Both Katello and Spacewalk have this capability. View their documentation to get an idea of how it works.</p>
</div>
<div class="section" id="spin-up-vm-s-using-katello-spacewalk">
<h3>Spin Up VM’s Using Katello/Spacewalk<a class="headerlink" href="#spin-up-vm-s-using-katello-spacewalk" title="Permalink to this headline">¶</a></h3>
<p>You will need to spin up two EL7 VM’s via Spacewalk or Katello. Do not spin them up using virt-install, virt-manager, etc. This will require you to connect Katello/Spacewalk to the hypervisor. Ensure they are registered properly to your content management server.</p>
<p>If you find the clients aren’t registering on Spacewalk, click <a class="reference external" href="https://fedorahosted.org/spacewalk/wiki/RegisteringClients">here</a> to see how to manually do it.</p>
<p>If you find the clients aren’t registering on Katello, click <a class="reference external" href="https://theforeman.org/manuals/1.15/index.html">here</a>.</p>
<p>If you want examples of an EL7 kickstart you can use, click <a class="reference external" href="https://github.com/nazunalika/useful-scripts/blob/master/centos/centos7-pci.ks">here</a>.</p>
<p>If you find that you do not want to use Katello/Spacewalk to perform this task, then you can setup cobbler and work it out from there. <strong>I currently do not have a tutorial for this, but there is plenty of documentation online.</strong></p>
</div>
<div class="section" id="setup-openldap">
<h3>Setup OpenLDAP<a class="headerlink" href="#setup-openldap" title="Permalink to this headline">¶</a></h3>
<p>The two VM’s you created from the previous step will need to be two LDAP servers. They will need to be master-master configured.</p>
<p>View the <a class="reference external" href="http://angelsofclockwork.net/wiki/centos/openldap.html">OpenLDAP</a> section of this wiki for a good idea how to get up and running. It also contains examples of getting clients to authenticate to LDAP.</p>
<p><strong>The above guide does not explain replication.</strong></p>
<p>If you instead do not want to hassle yourself into getting authenticated with LDAP (this is no easy task), you can consider setting up FreeIPA. It is generally pretty easy to setup FreeIPA, including standing up replicas. However, it DOES require you to setup DNS delegation for a subdomain (ipa.example.com for example) or have full control of your DNS infrastructure. There are pros and cons to both, really. You can read about FreeIPA <a class="reference external" href="https://www.freeipa.org">here</a>.</p>
</div>
<div class="section" id="spin-up-two-vm-s-for-databases">
<h3>Spin Up Two VM’s for Databases<a class="headerlink" href="#spin-up-two-vm-s-for-databases" title="Permalink to this headline">¶</a></h3>
<p>Create two new VM’s from your Content Management that are EL7 and install postgresql on them.</p>
<p>Do the following:</p>
<ol class="arabic simple">
<li>Install and configure pgpool-II for master-master replication</li>
<li>If using Spacewalk, export the database of your server and import it into the cluster. Reconfigure Spacewalk to use your database cluster (this is tricky)</li>
</ol>
<p><strong>Step 2 is NOT required if you are using Katello.</strong></p>
</div>
<div class="section" id="spin-up-configuration-management">
<h3>Spin Up Configuration Management<a class="headerlink" href="#spin-up-configuration-management" title="Permalink to this headline">¶</a></h3>
<p>While Katello has some form of puppet built in, it may be better to create a solitary configuration management VM. Spin up a VM that is EL6 or EL7 and install a master for configuration management. You have a few choices.</p>
<ol class="arabic">
<li><p class="first">SaltStack -&gt; Available in EPEL or their own repository (please use EPEL, salt’s repo collides with EPEL and it will destroy things)</p>
<ol class="arabic">
<li><p class="first">If you want to use the most up-to-date version (recommended), consider creating your own internal repository in Katello/Spacewalk and importing the minimal RPM’s, and then EPEL and the base repositories for CentOS will take care of the rest of the dependecies. You will need to make TWO separate repositories, one for EL6 and one for EL7. This won’t be an issue if you’re using all EL7.</p>
<p>-&gt; salt-*.rpm</p>
<p>-&gt; python2-pycryptodomex-*.rpm</p>
<p>-&gt; python-tornado-4.2.1-1.*.rpm</p>
<p>-&gt; winexe-*</p>
</li>
</ol>
</li>
<li><p class="first">Ansible   -&gt; Available in EPEL</p>
</li>
<li><p class="first">Puppet    -&gt; Available in their own repository</p>
</li>
</ol>
<p>As a side note, for EL6, you <strong>will</strong> need to pull the IUS CentOS 6 repository for python27 packages and then pull in all the python27* packages from the saltstack repo. From this point forward (as of 2017.7.0), this is required for Salt to function on EL6. EL7 is unaffected.</p>
<p>Spacewalk does support puppet in some fashion, but not SaltStack or Ansible (there are plugins though, but they are not perfect and require Salt/Ansible to run locally on the Spacewalk server). Katello was asked to include SaltStack support. There is currently a SaltStack plugin, but it may require that Salt run on the same server as Katello.</p>
</div>
<div class="section" id="spin-up-vm-for-nfs-iscsi">
<h3>Spin Up VM for NFS/iSCSI<a class="headerlink" href="#spin-up-vm-for-nfs-iscsi" title="Permalink to this headline">¶</a></h3>
<p>This VM should be EL7. Ensure it has an extra 20GB disk attached to it. Install the following:</p>
<ol class="arabic simple">
<li>An NFS server (nfs-utils)</li>
<li>An iSCSI server (EL6: scsi-target-utils) (EL7: scsi-target-utils, targetcli)</li>
</ol>
<p>You are to:</p>
<ol class="arabic simple">
<li>Export an NFS directory</li>
<li>Export a LUN to any server</li>
</ol>
<p>I highly recommend doing it manually first. The RHEL 6 links still apply to RHEL 7 to an extent. Below are helpful links for iSCSI.</p>
<p><a class="reference external" href="https://www.certdepot.net/sys-configure-an-iscsi-target/">iSCSI for RHEL 6 (target)</a></p>
<p><a class="reference external" href="https://www.certdepot.net/sys-configure-an-iscsi-initiator/">iSCSI for RHEL 6 (initiator)</a></p>
<p><a class="reference external" href="https://www.certdepot.net/rhel7-configure-iscsi-target-initiator-persistently/">iSCSI for RHEL 7 (both)</a></p>
</div>
<div class="section" id="deploy-bacula-server">
<h3>Deploy Bacula Server<a class="headerlink" href="#deploy-bacula-server" title="Permalink to this headline">¶</a></h3>
<p>Bacula is a backup service. It is actually confusing to setup. It’s not easy. There are plenty of write-ups for bacula and CentOS 6 and 7. The digital ocean write-ups are complete, but do NOT give you everything you need to know to do it “correct” or to succeed completing this portion.</p>
<p>Your server will need the following:</p>
<ol class="arabic simple">
<li>Ensure the system has a large disk or a large second disk (this can be any size, start small though) - You can also use your NFS server or iSCSI’s LUN.</li>
<li>Ensure it is partitioned for ext4</li>
<li>Ensure it is mounted to /bacula</li>
<li>If using iSCSI or NFS, ensure the disk from that server is bigger than 20GB. 50 should suffice.</li>
<li>Bakula will need to be configured to use postgresql (digital ocean does NOT use postgresql, you will need to do some reading)</li>
<li>Register each machine you have to it, storing to flatfile</li>
</ol>
</div>
<div class="section" id="deploy-four-vm-s">
<h3>Deploy Four VM’s<a class="headerlink" href="#deploy-four-vm-s" title="Permalink to this headline">¶</a></h3>
<p>These can be EL6 or EL7. Recommended EL7, but this will work fine for both.</p>
<ol class="arabic simple">
<li>First two will be web servers running apache (httpd)</li>
<li>Next two will be tomcat servers</li>
</ol>
<p>This is a typical “web/app” configuration. Some shops use apache frontends to weblogic backends. Sometimes it’s tomcat backends.</p>
<p>You will need to do the following:</p>
<ol class="arabic simple">
<li>Setup JBoss Wiki on your app servers</li>
<li>Setup apache to forward requests to your tomcat servers for the wiki</li>
<li>Do this as a VirtualHost configuration with the ServerName as “wiki.domain.tld”, replacing “domain.tld” with your domain</li>
<li>Set a ServerAlias as wiki</li>
</ol>
</div>
<div class="section" id="deploy-load-balancer-vm">
<h3>Deploy Load Balancer VM<a class="headerlink" href="#deploy-load-balancer-vm" title="Permalink to this headline">¶</a></h3>
<p>This will be considered a “VIP” of sorts for your wiki cluster. This VM can either use iptables round-robin or HAProxy. I highly recommend trying both to see what’s easier for you. <strong>HAProxy is recommended, because it’s an actual load balancer application.</strong></p>
<p>You will need the following:</p>
<ol class="arabic simple">
<li>A DNS CNAME for this machine called “wiki.domain.tld”, replacing domain.tld with your domain</li>
<li>You will need to configure apache to respond to requests for “wiki.domain.tld” (virtual host configuration) and forward them on to the app servers</li>
<li>HAProxy will need to forward 80 and 443 requests to the two web servers</li>
</ol>
<div class="panel panel-warning">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Warning</h3></div><div class="panel-body">
<p>Dynamic DNS</p>
<p>If you are using Dynamic DNS, you may need to run rndc sync before making changes. You will want to use the nsupdate command to make changes to your Dynamic Zones.</p>
</div></div>
</div>
<div class="section" id="deploy-postfix-vm">
<h3>Deploy Postfix VM<a class="headerlink" href="#deploy-postfix-vm" title="Permalink to this headline">¶</a></h3>
<p>This VM should be EL7. It doesn’t truly matter, but it will be a postfix mail relay (this will not be a mail server).</p>
<p>You will need to do the following:</p>
<ol class="arabic simple">
<li>Ensure postfix is listening on all interfaces</li>
<li>Ensure postfix is setup to send and receive messages only from your internal network</li>
<li>Setup a gmail account or another relay to allow the above to work to outside mail (this is sort of tricky for gmail, but doable)</li>
</ol>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
<p>Bonus Points</p>
<ul class="simple">
<li>Create two relays as “mailhost1” and “mailhost2” for your domain with the same configurations</li>
<li>Create a CNAME for “mailhost.domain.tld” for your load balancer, forwarding port 25 to both servers</li>
</ul>
</div></div>
</div>
<div class="section" id="setup-nagios-vm">
<h3>Setup Nagios VM<a class="headerlink" href="#setup-nagios-vm" title="Permalink to this headline">¶</a></h3>
<p>This will be a monitoring server on EL7. You will need to set it up to use snmp to monitor the communication state of every service above. This means:</p>
<ol class="arabic simple">
<li>Is the right port open?</li>
<li>I got the right kind of response.</li>
<li>Filesystem Space, too full?</li>
</ol>
<p>If you are planning to use full on SNMP, all servers will need the appropriate SNMP ports open and they will need the snmpd clients installed (with a monitor snmpd account)</p>
</div>
<div class="section" id="setup-syslog-vm">
<h3>Setup Syslog VM<a class="headerlink" href="#setup-syslog-vm" title="Permalink to this headline">¶</a></h3>
<p>Setup this server as a syslog server. It can be EL6 or EL7. Ensure that it is listening on port 514 UDP and TCP in the configuration and that those ports are open.</p>
<div class="panel panel-info">
<div class="panel-heading">
<h3 class="panel-title">
<i class='fa fa-exclamation-circle'></i> Note</h3></div><div class="panel-body">
You will need to go to your servers and setup /etc/rsyslog.conf to send ALL logs to this syslog server</div></div>
</div>
<div class="section" id="document-your-work">
<h3>Document Your Work<a class="headerlink" href="#document-your-work" title="Permalink to this headline">¶</a></h3>
<p>On your new wiki, document everything you did, right now, on your new wiki.</p>
</div>
<div class="section" id="rpm-build-server">
<h3>RPM Build Server<a class="headerlink" href="#rpm-build-server" title="Permalink to this headline">¶</a></h3>
<p>For fun, you can setup a new server that is your designated RPM building machine. You will need to install <strong>mock</strong> to do this. EL6 and EL7 are fine, as mock will emulate any RHEL or Fedora release as necessary. It is recommended to use EL7 has EL6 is now in phase 3 support.</p>
</div>
<div class="section" id="git-server">
<h3>Git Server<a class="headerlink" href="#git-server" title="Permalink to this headline">¶</a></h3>
<p>Also for fun, you can setup a git server. There are many options out there. A popular opensource one is <a class="reference external" href="https://about.gitlab.com/">Gitlab</a>. EL6 or EL7 are fine, as Gitlab supports both.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
	
	<div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
		
		<a href="freeipa.html" class="btn btn-default pull-right" accesskey="n">
			FreeIPA <span class="fa fa-arrow-circle-right"></span>
		</a>
		
		
		<a href="openldap.html" class="btn btn-default" accesskey="p">
			<span class="fa fa-arrow-circle-left"></span> OpenLDAP
		</a>
		
	</div>
	

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, remyabel, nazunalika.

    </p>
		<p>This site is not affiliated with or endorsed by the Fedora Project, nor the CentOS project</p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a heavily customized version of <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>

        </div>
      </div>

    </section>

  </div>
  


</main>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'master',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script type="text/javascript" src="../_static/js/prism.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>